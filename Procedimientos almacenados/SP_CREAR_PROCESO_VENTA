CREATE OR REPLACE PROCEDURE SP_CREAR_PROCESO_VENTA (
IN_INGRESO_ID IN NUMBER,
IN_SOLICITUD_COMPRA_ID IN NUMBER,
IN_SUBASTA_ID IN NUMBER,
IN_ETAPA IN NUMBER,
IN_FECHA_CREACION IN DATE,
IN_CLIENTE_ACEPTA_ACUERDO IN CHAR,
IN_PRECIO_VENTA_TOTAL IN NUMBER,
IN_PRTECIO_COSTO_TOTAL IN NUMBER,
OUT_GLOSA 		OUT VARCHAR2,
OUT_ESTADO 		OUT NUMBER,
OUT_ID_SALIDA 	OUT NUMBER
)AS 
BEGIN

INSERT INTO FERIA2.proceso_venta (
ingreso_id,
solicitud_compra_id, 
subasta_id, 
etapa, 
fechacreacion, 
clienteaceptaacuerdo, 
precioventatotal, 
preciocostototal)
VALUES (
IN_INGRESO_ID,
IN_SOLICITUD_COMPRA_ID,
IN_SUBASTA_ID,
IN_ETAPA,
IN_FECHA_CREACION,
IN_CLIENTE_ACEPTA_ACUERDO,
IN_PRECIO_VENTA_TOTAL,
IN_PRTECIO_COSTO_TOTAL
)

RETURNING ID INTO OUT_ID_SALIDA;

    EXCEPTION
        WHEN OTHERS THEN
            OUT_ESTADO := -1;
            OUT_GLOSA := feria2.FN_GET_GLOSA_ERROR;
  NULL;
END SP_CREAR_PROCESO_VENTA;
